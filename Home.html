<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Market Dashboard Pro - Full Structure</title>
    <link rel="stylesheet" href="styles.css"> <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="preload">

    <header class="header">
        <div class="header-left">
            <button class="profile-btn" id="profileBtn" aria-label="Open Profile Panel" title="Profile">
                <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&q=80" alt="Profile Avatar" class="avatar">
            </button>
            <div class="search-container">
                <input type="text" placeholder="Search stocks, indices..." class="search-input" aria-label="Search Stocks & Indices">
                <i data-lucide="search" class="search-icon"></i>
                <button class="voice-btn" id="voiceBtn" aria-label="Voice Search" title="Voice Search (Not Implemented)">
                    <i data-lucide="mic"></i>
                </button>
            </div>
        </div>

        <div class="header-right">
             <button class="settings-entry-btn" id="settingsEntryBtn" aria-label="Open Settings" title="Settings">
                 <i data-lucide="settings"></i>
             </button>
            <button class="theme-toggle-btn" id="themeToggleBtn" aria-label="Toggle Theme" title="Toggle Theme">
                <i data-lucide="moon"></i>
            </button>
            <button class="notification-btn" id="notificationBtn" aria-label="Show Notifications" title="Notifications (Not Implemented)">
                <i data-lucide="bell"></i>
                <span class="notification-badge hidden" id="notificationBadge">0</span>
            </button>
            <button class="refresh-btn" id="refreshBtn" aria-label="Refresh Data" title="Refresh Data">
                <i data-lucide="rotate-cw"></i>
            </button>
        </div>
    </header>

    <div class="profile-panel hidden" id="profilePanel">
        <div class="profile-header">
            <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&q=80" alt="Profile Avatar Large" class="profile-avatar">
            <div class="profile-user-info">
                <h3>John Doe</h3>
                <p>john.doe@example.com</p>
            </div>
        </div>
        <nav class="profile-nav">
            <a href="#" class="profile-nav-link" data-action="edit-profile">
                <i data-lucide="user"></i> Edit Profile
            </a>
             <a href="#" class="profile-nav-link" data-action="change-password">
                <i data-lucide="lock"></i> Change Password
            </a>
            <a href="#" class="profile-nav-link" data-action="view-privacy">
                <i data-lucide="shield"></i> Privacy Policy
            </a>
             <a href="#" class="profile-nav-link" data-action="open-settings">
                <i data-lucide="settings-2"></i> App Settings
            </a>
        </nav>
        <div class="profile-actions">
            <button class="logout-btn" id="logoutBtn">
                <i data-lucide="log-out"></i>
                <span>Logout</span>
            </button>
        </div>
    </div>

    <main class="container">
        <div class="main-content">
            <section class="ai-summary-section card">
                 <div class="section-header">
                    <i data-lucide="brain" class="icon-purple"></i>
                    <h2>AI Market Summary <span class="sentiment-flame">ðŸ”¥</span></h2>
                </div>
                <p id="marketSummaryText">Analysing market data... <i data-lucide="loader-2" class="spin"></i></p>
                <div class="market-breadth-placeholder">
                     <span class="breadth-label">Breadth:</span>
                     <span class="advances"><i data-lucide="arrow-up"></i> 1250</span>
                     <span class="declines"><i data-lucide="arrow-down"></i> 800</span>
                     <span class="unchanged"><i data-lucide="minus"></i> 150</span>
                </div>
            </section>

            <section class="watchlist-section">
                <div class="section-header-main">
                    <h2>My Watchlist <i data-lucide="list" class="icon-subtle"></i></h2>
                    <div class="watchlist-controls">
                        <label for="sortWatchlist" class="sr-only">Sort by:</label>
                        <select id="sortWatchlist" class="sort-dropdown" aria-label="Sort Watchlist">
                            <option value="default">Default Order</option>
                            <option value="name-asc">Name (A-Z)</option>
                            <option value="name-desc">Name (Z-A)</option>
                            <option value="change-desc">Change % (High-Low)</option>
                            <option value="change-asc">Change % (Low-High)</option>
                            <option value="confidence-desc">AI Confidence (High-Low)</option>
                        </select>
                        <button class="add-btn green" id="addStockBtn">
                            <i data-lucide="plus"></i>
                            Add Stock
                        </button>
                    </div>
                </div>
                <div class="watchlist-items" id="watchlistItems">
                    <div class="loading-placeholder">Loading Watchlist... <i data-lucide="loader-2" class="spin"></i></div>

                    <div class="watchlist-item-placeholder">
                        <div class="watchlist-header" role="button" tabindex="0" aria-expanded="false">
                             <span class="expand-icon"><i data-lucide="chevron-down"></i></span>
                             <div class="watchlist-info">
                                 <span class="watchlist-sentiment-emoji"> M </span>
                                 <span class="watchlist-name">STOCK NAME</span>
                             </div>
                             <span class="watchlist-price price-container">â‚¹----.--</span>
                             <span class="watchlist-change price-change">
                                <span class="change-pill">--.--%</span>
                             </span>
                             <span class="watchlist-indicator-ai">
                                <span class="stock-indicator hold">HOLD</span>
                                <span class="ai-confidence-display">
                                     <span class="confidence-bar-container"><span class="confidence-bar" style="width: 75%;"></span></span>
                                    --%
                                </span>
                            </span>
                        </div>
                        <div class="watchlist-details">
                           <div class="watchlist-details-content">
                               <p>Details loading...</p>
                           </div>
                        </div>
                    </div>

                </div>
            </section>
        </div>

        <aside class="sidebar">
            <section class="indices-section card">
                <div class="section-header-main">
                    <h2>Indices <i data-lucide="line-chart" class="icon-subtle"></i></h2>
                    <button class="add-btn small icon-only" id="addIndexBtn" title="Add Index">
                        <i data-lucide="plus"></i>
                    </button>
                </div>
                <div class="indices-list" id="marketIndices">
                     <div class="loading-placeholder">Loading Indices...</div>
                     <div class="index-item-placeholder">
                         <div>
                            <h3>INDEX NAME</h3>
                            <span class="price-container">----.--</span>
                         </div>
                         <span class="change-pill">--.--%</span>
                     </div>
                </div>
            </section>

            <section class="trending-section card">
                <div class="section-header">
                    <i data-lucide="trending-up" class="icon-purple"></i>
                    <h2>Trending Stocks <span class="sentiment-rocket">ðŸš€</span></h2>
                </div>
                <div class="trending-list" id="trendingStocks">
                    <div class="loading-placeholder">Loading Trending...</div>
                     <div class="trending-item-placeholder">
                         <div>
                            <span class="trending-name">TRENDING</span>
                            <span class="price-container">â‚¹----.--</span>
                         </div>
                         <span class="change-pill">--.--%</span>
                     </div>
                </div>
            </section>

             <section class="market-movers-section card">
                <div class="section-header">
                    <i data-lucide="move" class="icon-subtle"></i>
                    <h2>Market Movers</h2>
                </div>
                <div class="market-movers-tabs">
                    <button class="tab-btn active" data-tab="gainers">Top Gainers</button>
                    <button class="tab-btn" data-tab="losers">Top Losers</button>
                </div>
                <div class="market-movers-content" id="marketMoversContent">
                    <div class="loading-placeholder">Loading Movers...</div>
                     <div class="mover-item-placeholder">
                        <span class="name">MOVER</span>
                        <span class="change change-up">+-.--%</span>
                    </div>
                </div>
            </section>

             <section class="sector-performance-section card">
                <div class="section-header">
                    <i data-lucide="pie-chart" class="icon-subtle"></i>
                    <h2>Sector Performance</h2>
                </div>
                <div class="sector-list" id="sectorList">
                     <div class="loading-placeholder">Loading Sectors...</div>
                     <div class="sector-item-placeholder">
                        <span class="name">SECTOR</span>
                        <span class="change change-up">+-.--%</span>
                    </div>
                </div>
            </section>

        </aside>
    </main>

    <div class="modal hidden" id="listModal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Add Item</h2>
                <button class="modal-close-btn" id="modalCloseBtn" aria-label="Close modal">
                   <i data-lucide="x"></i>
                </button>
            </div>
            <div class="modal-search">
                <input type="text" placeholder="Search..." id="modalSearch" aria-label="Search items to add">
                <i data-lucide="search"></i>
            </div>
            <div class="modal-list-container">
                <div class="modal-loading hidden" id="modalLoading">
                    <p><i data-lucide="loader-2" class="spin"></i> Loading items...</p>
                </div>
                <div class="modal-empty hidden" id="modalEmpty">
                    <p><i data-lucide="search-x"></i> No items found.</p>
                </div>
                <div class="modal-items" id="modalItems">
                    <div class="modal-item-placeholder">
                        <div class="flex justify-between items-center">
                            <div>
                                <h3>ITEM NAME</h3>
                                <p>â‚¹----.-- (--.--%)</p>
                            </div>
                            <button class="add-item-btn" disabled>
                                <i data-lucide="plus"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal hidden" id="settingsModal">
         <div class="modal-overlay"></div>
         <div class="modal-content settings-modal-content">
            <div class="modal-header">
                <h2><i data-lucide="settings"></i> Settings</h2>
                <button class="modal-close-btn" id="settingsModalCloseBtn" aria-label="Close settings">
                   <i data-lucide="x"></i>
                </button>
            </div>
            <div class="settings-sections">
                <div class="settings-section">
                    <h3><i data-lucide="user"></i> Profile</h3>
                    <div class="setting-item">
                        <label>Edit Profile Info</label>
                        <button class="btn btn-secondary btn-sm" data-action="edit-profile">Edit</button>
                    </div>
                     <div class="setting-item">
                        <label>Change Password</label>
                        <button class="btn btn-secondary btn-sm" data-action="change-password">Change</button>
                    </div>
                     <div class="setting-item">
                        <label>Privacy Policy</label>
                        <button class="btn btn-link btn-sm" data-action="view-privacy">View</button>
                    </div>
                </div>
                <div class="settings-section">
                    <h3><i data-lucide="bell-ring"></i> Notifications</h3>
                     <div class="setting-item toggle-item">
                        <label for="toggleStockAlerts"><i data-lucide="bar-chart-2"></i> Stock Price Alerts</label>
                        <label class="switch">
                          <input type="checkbox" id="toggleStockAlerts" checked>
                          <span class="slider round"></span>
                        </label>
                    </div>
                    <div class="setting-item toggle-item">
                        <label for="toggleNewsAlerts"><i data-lucide="newspaper"></i> Market News</label>
                        <label class="switch">
                          <input type="checkbox" id="toggleNewsAlerts" checked>
                          <span class="slider round"></span>
                        </label>
                    </div>
                     <div class="setting-item toggle-item">
                        <label for="toggleAiAlerts"><i data-lucide="lightbulb"></i> AI Suggestions</label>
                        <label class="switch">
                          <input type="checkbox" id="toggleAiAlerts">
                          <span class="slider round"></span>
                        </label>
                    </div>
                    <div class="setting-item toggle-item">
                        <label for="toggleWatchlistAlerts"><i data-lucide="list-checks"></i> Watchlist Updates</label>
                        <label class="switch">
                          <input type="checkbox" id="toggleWatchlistAlerts" checked>
                          <span class="slider round"></span>
                        </label>
                    </div>
                    <div class="setting-item toggle-item">
                        <label for="togglePopupAlerts"><i data-lucide="message-square"></i> In-App Popups</label>
                         <label class="switch">
                          <input type="checkbox" id="togglePopupAlerts" checked>
                          <span class="slider round"></span>
                        </label>
                    </div>
                </div>
                 <div class="settings-section">
                    <h3><i data-lucide="palette"></i> Appearance</h3>
                     <div class="setting-item">
                        <label>Theme</label>
                        <div class="theme-selector">
                            <button class="btn btn-sm theme-option" data-theme="light"><i data-lucide="sun"></i> Light</button>
                            <button class="btn btn-sm theme-option" data-theme="dark"><i data-lucide="moon"></i> Dark</button>
                        </div>
                    </div>
                </div>
            </div>
         </div>
    </div>

    <div class="notification-toast hidden" id="notificationToast">
        <i data-lucide="info" class="toast-icon"></i>
        <p id="notificationText"></p>
        <button class="toast-close-btn" id="toastCloseBtn" aria-label="Close notification">
            <i data-lucide="x"></i>
        </button>
    </div>

    <script src="app.js"></script>
</body>
</html>